#include <iostream>
#include <cstdlib>
#include <time.h>
#include <conio.h>
#include "Tablero.cpp"
#include <stdio.h>
#include <windows.h>

using namespace std;

int main()
{
	char tecla, tecla1;
	int cursi, cursj, cursi1, cursj1, aux, score, movimientos=0;
	bool flag;
	
	srand(time(NULL));
	
	int tablero[10][10];
	vaciar(tablero);
	
	while(1)
	{
		romperCaramelos(tablero, score);
		cargar(tablero);
		cursi1 = cursj1 = -1;
		system("cls");
		mostrar(tablero, cursi, cursj, cursi1, cursj1, movimientos, score);
		
		tecla = getch();
		
		switch(tecla)
		{
			case 72://FLECHA DE ARRIBA
				if(cursi==0) cursi = 9;
				else cursi --;
				break;
				
			case 80://FLECHA DE ABAJO
				if(cursi==9) cursi = 0;
				else cursi ++;
				break;
				
			case 75://FLECHA DE LA IZQUIERDA
				if(cursj==0) cursj == 9;
				else cursj --;
				break;
			
			case 77://FLECHA DE LA DERECHA
				if(cursj==9) cursj == 0;
				else cursj ++;
				break;
				
			case 13://ENTER
				tecla1=10;
				cursi1 = cursi;
				cursj1 = cursj;
				while(tecla1!=13)
				{
					system("cls");
					mostrar(tablero, cursi, cursj, cursi1, cursj1, movimientos, score);
					
					tecla1 = getch();
				
					switch(tecla1)	//HABIENDO SELECCIONADO UNA FICHA TOCA SELECCIONAR LA SEGUNDA
					{
						case 72://FLECHA DE ARRIBA
							if(cursi1==0) cursi1 = 9;
							else if(cursi - 1 != cursi1) cursi1 --;
							break;
					
						case 80://FLECHA DE ABAJO
							if(cursi1==9) cursi1 = 0;
							else if(cursi + 1 != cursi1) cursi1 ++;
							break;
				
						case 75://FLECHA DE LA IZQUIERDA
							if(cursj1==0) cursj1 = 9;
							else if(cursj - 1 != cursj1) cursj1 --;
							break;
			
						case 77://FLECHA DE LA DERECHA
							if(cursj1==9) cursj1 = 0;
							else if(cursj + 1 != cursj1) cursj1 ++;
							break;
							
						case 13://ENTER
							aux = tablero[cursi1][cursj1];
							tablero[cursi1][cursj1] = tablero[cursi][cursj];
							tablero[cursi][cursj] = aux;
							movimientos ++;
							break;
					}
				}
				break;
		}
	}
}
